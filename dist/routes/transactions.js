"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const s=require("../models/models");class t{constructor(s){this.routes=[],this.mlipia=s,this.register(),this.listen()}add(t,e){new s.TransactionModel(t.body).save().then(s=>{e.status(200).send(s)}).catch(s=>{e.status(400).send(s)})}list(t,e){let o;switch(console.log(t.body),t.body.select){case"all":o={};break;case"successful":o={success:!0};break;case"failed":o={success:!1}}s.TransactionModel.find(o).then(s=>{console.log(s),e.status(200).send(s)}).catch(s=>{e.status(400).send(s),console.log(s)})}listen(){this.routes.forEach(s=>{this.mlipia.app[s.method](s.address,s.func)})}register(){this.routes.push({address:"/transactions/new",func:(s,t)=>{this.add(s,t)},method:"post"}),this.routes.push({address:"/transactions/list",func:(s,t)=>{this.list(s,t)},method:"post"})}}exports.TransactionsRoutes=t;